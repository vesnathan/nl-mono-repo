# Site Settings Type Definitions
# Extensible settings system for site-wide configuration

type SiteSettings @aws_iam @aws_cognito_user_pools {
  # Badge Settings
  grantOGBadgeToPatreonSupporters: Boolean!

  # OAuth Provider Settings
  googleOAuthEnabled: Boolean!
  facebookOAuthEnabled: Boolean!
  appleOAuthEnabled: Boolean!

  # Advertising Settings
  adsEnabled: Boolean!
  adsensePublisherId: String # ca-pub-XXXXXXXXXXXXXX
  adsenseVerificationCode: String # For site verification
  showAdsOnHomepage: Boolean!
  showAdsOnStoryEnd: Boolean!
  showAdsInFooter: Boolean!
  homepageAdSlot: String # AdSense ad unit ID for homepage
  storyEndAdSlot: String # AdSense ad unit ID for story end
  footerAdSlot: String # AdSense ad unit ID for footer

  # Error Tracking Settings
  sentryDsn: String # Sentry DSN for error tracking
  sentryEnabled: Boolean!

  # Future settings can be added here:
  # maintenanceMode: Boolean
  # allowNewUserRegistration: Boolean
  # featuredStoryIds: [ID!]
  # maxStoriesPerUser: Int
  # etc.

  updatedAt: String!
  updatedBy: String # userId of admin who last updated
}

input UpdateSiteSettingsInput {
  # Badge Settings
  grantOGBadgeToPatreonSupporters: Boolean

  # OAuth Provider Settings
  googleOAuthEnabled: Boolean
  facebookOAuthEnabled: Boolean
  appleOAuthEnabled: Boolean

  # Advertising Settings
  adsEnabled: Boolean
  adsensePublisherId: String
  adsenseVerificationCode: String
  showAdsOnHomepage: Boolean
  showAdsOnStoryEnd: Boolean
  showAdsInFooter: Boolean
  homepageAdSlot: String
  storyEndAdSlot: String
  footerAdSlot: String

  # Error Tracking Settings
  sentryDsn: String
  sentryEnabled: Boolean

  # Future settings can be added here
}

extend type Query {
  getSiteSettings: SiteSettings! @aws_iam @aws_cognito_user_pools
}

extend type Mutation {
  updateSiteSettings(input: UpdateSiteSettingsInput!): SiteSettings!
    @aws_iam
    @aws_cognito_user_pools
}
