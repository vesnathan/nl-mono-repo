# This file defines the Query and Mutation operations for the CWL AppSync API
# Type definitions (CWLUser, ClientType, CWLUserInput) come from shared types

type Mutation {
  # Creates a new CWL User
  createCWLUser(input: CWLUserInput!): CWLUser
}

type Query {
  # Retrieves a CWLUser by their ID (Cognito Sub)
  getCWLUser(userId: String!): CWLUser
    @aws_cognito_user_pools # Directive for AppSync authorization
}

enum ClientType {
  SuperAdmin
  EventCompanyAdmin
  EventCompanyStaff
  TechCompanyAdmin
  TechCompanyStaff
  RegisteredAttendee # Corrected typo
  UnregisteredAttendee
}

type CWLUser @aws_cognito_user_pools {
  userId: String!
  organizationId: String!
  privacyPolicy: Boolean!
  termsAndConditions: Boolean!
  userAddedById: String!
  userCreated: String!
  userEmail: String!
  userTitle: String!
  userFirstName: String!
  userLastName: String!
  userPhone: String!
  userRole: String!
  clientType: [ClientType!]!
}


input CWLUserInput {
  userEmail: String!
  userTitle: String!
  userFirstName: String!
  userLastName: String!
  userPhone: String!
  organizationId: String!
  userRole: String!
}

# These types are added by AppSync. We redefined them here so that it works with "graphql-schema-typescript" package
# These shouldn't be included in schema file otherwise it'll complain about duplicate type definition

# Scalar type: https://docs.aws.amazon.com/appsync/latest/devguide/scalars.html
scalar AWSDate
scalar AWSTime
scalar AWSDateTime
scalar AWSTimestamp
scalar AWSEmail
scalar AWSJSON
scalar AWSURL
scalar AWSPhone
scalar AWSIPAddress

# auth directives https://docs.aws.amazon.com/appsync/latest/devguide/security-authz.html#using-additional-authorization-modes
directive @aws_subscribe(mutations: [String!]!) on FIELD_DEFINITION
directive @aws_auth(cognito_groups: [String!]!) on FIELD_DEFINITION
directive @aws_api_key on FIELD_DEFINITION | OBJECT
directive @aws_iam on FIELD_DEFINITION | OBJECT
directive @aws_oidc on FIELD_DEFINITION | OBJECT
directive @aws_cognito_user_pools(cognito_groups: [String!]) on FIELD_DEFINITION | OBJECT